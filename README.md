# PyMC5 二项分布抽样演示

这是一个使用PyMC5进行二项分布随机抽样的演示项目，展示了贝叶斯统计方法在实际问题中的应用。

## 🚀 快速开始

### 1. 环境准备

#### 使用conda（推荐）
```bash
# 创建环境
conda env create -f environment.yml

# 激活环境
conda activate pymc5_env

# 运行演示
python binomial_demo.py
```

#### 使用pip（备选）
```bash
# 安装依赖
pip install -r requirements.txt

# 运行演示
python binomial_demo.py
```

### 2. 运行演示

直接运行主脚本即可：
```bash
python binomial_demo.py
```

## 📊 功能说明

### 主要功能
1. **二项分布建模** - 创建贝叶斯二项分布模型
2. **MCMC抽样** - 使用NUTS采样器进行后验抽样
3. **统计分析** - 计算后验统计量和置信区间
4. **可视化展示** - 生成多种图表展示结果
5. **参数敏感性分析** - 测试不同参数对结果的影响

### 输出文件
- `binomial_demo_results.png` - 主要分析结果图表
- `parameter_sensitivity.png` - 参数敏感性分析结果

## 🔧 技术栈

- **PyMC 5.x** - 概率编程框架
- **NumPy** - 数值计算
- **Matplotlib** - 数据可视化
- **ArviZ** - 贝叶斯统计分析
- **SciPy** - 科学计算

## 📈 结果解释

### 后验分布图
显示参数p的贝叶斯后验分布，包括：
- 后验均值（最佳估计）
- 95%可信区间
- 分布形状

### MCMC诊断图
- **迹线图** - 检查马尔可夫链的收敛性
- **自相关图** - 评估样本的自相关性

### 理论与观测对比
- 观测数据的实际分布
- 基于估计参数的理论二项分布
- 两者的一致性验证

## 🎯 使用场景

1. **教学演示** - 展示贝叶斯统计方法
2. **模型验证** - 测试PyMC5的建模能力
3. **参数学习** - 理解二项分布参数估计
4. **敏感性分析** - 研究参数变化对结果的影响

## 📝 示例输出

运行脚本后，您将看到类似以下的输出：

```
============================================================
PyMC5 二项分布抽样演示
============================================================
创建二项分布模型:
- 试验次数 n = 100
- 真实概率 p = 0.3
- 观测样本数 = 1000

=== 参数估计结果 ===
     mean     sd  hdi_3%  hdi_97%  mcse_mean  mcse_sd  ess_bulk  ess_tail  r_hat
p  0.298  0.014   0.272    0.325      0.001    0.001    1234.5    1567.8    1.0

=== 观测数据统计 ===
观测均值: 29.85
观测标准差: 4.56
估计概率 p̂: 0.299
```

## 🔍 故障排除

### 常见问题

1. **环境激活失败**
   ```bash
   conda activate pymc5_env
   ```

2. **依赖安装问题**
   ```bash
   conda update conda
   conda install pymc>=5.0.0
   ```

3. **采样警告**
   - 增加`tune`参数值
   - 提高`target_accept`值

4. **可视化中文乱码**
   - 确保系统已安装中文字体
   - 或修改脚本中的字体设置

## 📚 学习资源

- [PyMC官方文档](https://docs.pymc.io/)
- [贝叶斯统计入门](https://github.com/pymc-devs/pymc-resources)
- [ArviZ可视化指南](https://arviz-devs.github.io/arviz/)

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个演示项目！